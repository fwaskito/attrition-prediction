{% extends "base.html" %}
{% block title %}Employee Histories Data{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-md-12 col-12">
      <div class="data_table">
        <div class="row align-items-end">
          <div class="p-2 col-md-2 col-4">
            <button class="btn btn-outline-primary btn-sm shadow-sm" id="btn-show-all-children" type="button">
              Expand All</button>
            <button class="btn btn-sm btn-outline-danger shadow-sm" id="btn-hide-all-children" type="button">
              Collapse All</button>
          </div>
          <div class="col text-center">
            <h4><b>Employee Histories Data</b></h4>
          </div>

          <div class="col-md-2 col-4 border bg-light shadow-sm">
            <small>Attrition Class Distribution</small><br>
            <table class="table table-light">
              <tr>
                <td class="table table-success"><b><i>No</i></b>:</td>
                <td class="table">{{class_distrib.no}}</td>
                <td class="table table-danger"><b><i>Yes</i></b>:</td>
                <td class="table">{{class_distrib.yes}}</td>
              </tr>
            </table>
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-12">
            <small>Export to:</small>
            <table id="dataTable" class="table table-responsive border table-hover shadow-lg" width="100%">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Modif. Action</th>
                  <th>Modif. Date</th>
                  <th>Attrition</th>
                  <th>Age</th>
                  <th>Department</th>
                  <th>Dist. from Home</th>
                  <th>Education</th>
                  <th class="none">
                    <div style="margin-right: 45px;">Education Field</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 38px;">Env. Satisfaction</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 43px;">Job Satisfaction</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 52px;">Marital Status</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 12px;">Num. Comp. worked</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 19px;">Monthly Income ($)</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 27px;">Work Life Balance</div>
                  </th>
                  <th class="none">
                    <div style="margin-right: 27px;">Years at Company</div>
                  </th>
                </tr>
              </thead>
              <tfoot>
                <tr>
                  <th>ID</th>
                  <th>Modif. Action</th>
                  <th>Modif. Date</th>
                  <th>Attrition</th>
                  <th>Age</th>
                  <th>Department</th>
                  <th>Dist. from Home (KM)</th>
                  <th>Education</th>
                  <th>Education Field</th>
                  <th>Env. Satisfaction</th>
                  <th>Job Satisfaction</th>
                  <th>Marital Status</th>
                  <th>Num. Comp. Worked</th>
                  <th>Monthly Income</th>
                  <th>Work Life Balance</th>
                  <th>Years at Company</th>
                </tr>
              </tfoot>
              <tbody class="table table-secondary table-group-divider">
                {% for employee in employee_histories %}
                <tr class="pd-2">
                  <td>{{employee['id']}}</td>
                  {% if employee['modif_action'] == 'delete' %}
                  <td>
                    <font style="color:red;"><strong><i>{{employee['modif_action']}}</i></strong>
                    </font>
                  </td>
                  {% else %}
                  <td>
                    <font style="color:green;"><strong><i>{{employee['modif_action']}}</i></strong>
                    </font>
                  </td>
                  {% endif %}
                  <td>{{employee['modif_date']}}</td>
                  {% if employee['attrition'] == 'Yes' %}
                  <td class="table table-danger">{{employee['attrition']}}</td>
                  {% else %}
                  <td class="table table-success">{{employee['attrition']}}</td>
                  {% endif %}
                  <td>{{employee['age']}}</td>
                  <td>{{employee['department']}}</td>
                  <td>{{employee['dist_from_home']}}</td>
                  <td>{{employee['education']}}</td>
                  <td>{{employee['education_field']}}</td>
                  <td>{{employee['env_satisfaction']}}</td>
                  <td>{{employee['job_satisfaction']}}</td>
                  <td>{{employee['marital_status']}}</td>
                  <td>{{employee['num_comp_worked']}}</td>
                  <td>{{employee['monthly_income']}}</td>
                  <td>{{employee['work_life_balance']}}</td>
                  <td>{{employee['years_at_company']}}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}